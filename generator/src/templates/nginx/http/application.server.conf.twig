{% extends "nginx/http/server.conf.twig" %}
{% block locations %}
    root /data/public/{{ endpointData['entry-point'] }};
    index index.php;

    if ($request_uri ~* "^(.*/)index\.php(.*)$") {
        return 301 $1;
    }

{% include "nginx/http/static.conf.twig" with _context %}

    location ~ \.php$ {
{% block location %}
        include fastcgi.conf;
        fastcgi_pass {{ upstream }};

{% include "nginx/http/default.location.conf.twig" with _context %}

{% include "nginx/http/store.params.conf.twig" with _context %}

        fastcgi_param SPRYKER_SSL_ENABLE {{ (project['docker']['ssl']['enabled'] | default(false)) ? 1 : 0 }};
        fastcgi_param HTTPS {{ (project['docker']['ssl']['enabled'] | default(false)) ? 'on' : 'off' }};
{% endblock location %}
    }
{% endblock locations %}
